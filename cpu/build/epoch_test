#!/bin/bash

if [ $# -eq 0 ]; then
	echo 'no arguments! ./exec help for more information'

elif [ $1 = 'help' ]; then
	echo 'this program is a simple benchmark for neural networks using XOR as training'
	echo 'It produces a plot of the error v/s no of epochs.'
	echo 'three arguments required, ./exec 1 2 3'
	echo '1 - min no of moves to train'
	echo '2 - max no of moves to train'
	echo '3 - step size'


elif [ $1 -gt $2 ]; then
	echo 'first argument should be less than the second!'

else
	ninja
	./xor $1 0 > epoch_test_data.txt
	echo 'running tests...'
	for (( i=$(($1 + $3)); i<=$2; i+=$3 ))
	do
		./xor $i 0 >> epoch_test_data.txt
	done
	echo 'plotting...'
	gnuplot -e "plot 'epoch_test_data.txt'; pause -1"
fi
